Upgrading Achievo
=================

Read this first
---------------
Depite our efforts to keep this UPGRADE file as accurate as possible, there
might be situations in which the described procedure does not work.
In this case send an email to ivo@achievo.com or to the mailinglist
(achievo@achievo.com) and we will try to help you out.

IMPORTANT
---------
The Achievo 0.7.* releases are development releases. Do not use this in a 
production environment. If you want to use Achievo in a production 
environment, download the latest stable (0.6.*) release.

Achievo 0.7.* may be broken, nonfunctional and it could severely corrupt your
Achievo database. So we highly recommend using a NEW database to test 
Achievo 0.7.*.

But, if you still have the guts to upgrade from a stable Achievo to this 
development release, here's some help on upgrading.

IF IT FAILS, YOU'RE ON YOUR OWN. WE WARNED YOU.

Upgrading from version 0.7.x -> 0.7.2
-------------------------------------
Due to compatibility problems with Oracle, we had to rename the column 'date' 
in the hours table to 'activitydate'. If you want to use a database from 
Achievo versions older than 0.7.2, you have to rename this column. You can do 
this with your favorite sql tool. Just execute the following SQL statement 
(make sure you have the priviliges to do this):

ALTER TABLE hours CHANGE date activitydate DATE NOT NULL

Upgrading from version 0.6.x -> 0.7
-----------------------------------
As of version 0.7 Achievo requires PHP4. PHP3 is not supported anymore!

If you were/are running the 0.6.x version of Achievo in a PHP3 only
environment you have to update your PHP version to PHP4 (we recommend
the latest version) first.

Once you have a PHP4 environment you have to backup your old
Achievo configuration file (config.inc.php3). Install the new
release, just follow the steps in INSTALL, but ommit step 2! (you already
have a working database)
Rename your old config.inc.php3 to config.inc.php and copy it to
the root of your fresh Achievo install.


Upgrading from version 0.4.x -> 0.7
-----------------------------------
(Note: at this time there is no upgrade procedure available for upgrading
a MySQL database to a new PostgreSQL database.)

The database structure has changed a lot between 0.4.x and 0.7, so there
are a few steps that you need to do to convert your old database to be
compatible with Achievo 0.7.

Note: the upgrade procedure does not affect your old database, so
it's safe to try the conversion.

If you were/are running the 0.4.x version of Achievo in a PHP3 only
enviroment you have to update your PHP version to PHP4 (we recommend
the latest version) first.

Once you have a PHP4 enviroment available you have follow the steps below.

1. First install Achievo 0.7 to a new directory (leave your existing 
   Achievo installation in place), using the achievo_mysql.sql 
   file, as described in the INSTALL file. When creating the database,
   make sure you create a new one, don't use your existing database.
   For example: if your current Achievo database is called 'achievo',
   create a new database that you call 'achievo_0_7'.
   
2. Set an administrator password by editing the config.inc.php file and
   changing the $config_administratorpassword setting.
    
3. Edit the file convert.php and change the settings in the script.
   
4. Point your browser to the convert.php script. 
   For example: http://myserver/achievo_0_7/convert.php
   
5. The way we handle user passwords has changed in Achievo 0.7. Since there
   is no way to decode the existing passwords, we can't convert the existing
   passwords. If you have not set a default password for users in the 
   convert.php script, you must now login to your new Achievo installation,
   and use 'Employee Administration' to set a password for every user. 
   If you set a default password, users can login using this default password
   and change their own password.
 
6. Finally, log into Achievo, go to the 'Security Profiles' section and edit 
   the 'Default Group'. You have to grant permissions to this profile, since
   every converted user is put in this default profile.
   
The Achievo upgrade is now complete. If you have any questions, please join 
the mailinglist by sending an empty message to achievo-subscribe@achievo.com.
